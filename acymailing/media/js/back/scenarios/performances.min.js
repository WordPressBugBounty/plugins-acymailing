jQuery(function(e){const t={scenarioId:null,stepId:null,type:null,page:null,search:null};let n={};function c(){!function(){const e=document.getElementById("acym_pagination"),n=document.getElementsByClassName("acym__pagination__page");if(!e)return;e.addEventListener("change",()=>{t.page=e.value,a()});for(let e=0;e<n.length;e++)n[e].addEventListener("click",function(){t.page=this.getAttribute("page"),a()})}(),function(){const e=document.getElementsByClassName("acym__scenario__performance__trigger__user");for(let c=0;c<e.length;c++)e[c].addEventListener("click",function(){n=JSON.parse(JSON.stringify(t)),_(this.getAttribute("data-acym-user-id"),this.getAttribute("data-acym-process-id"))})}(),function(){const e=document.getElementById("acym__scenario__performance__step__search");if(!e)return;let n=null;e.addEventListener("input",function(){clearTimeout(n),n=setTimeout(()=>{t.search=e.value,a()},500)})}(),function(){const e=document.getElementById("acym__scenario__performance__user__back");if(!e)return;e.addEventListener("click",function(){for(let e in t)null!==n[e]&&(t[e]=n[e]);n={},a()})}()}function _(e,t){const n=document.getElementById("acym__scenario__edit__right__panel__content");if(!e||!t||!n)return;i(!0);const _={ctrl:"scenarios",task:"getUserInfo",userId:e,processId:t};acym_helper.get(ACYM_AJAX_URL,_).then(e=>{i(!1),e.error||(n.innerHTML=e.data.content,c())})}function a(){const e=document.getElementById("acym__scenario__edit__right__panel__content");if(!e)return;i(!0);const n={ctrl:"scenarios",task:"getStepStats",scenarioId:t.scenarioId,stepId:t.stepId,type:t.type,page:t.page,search:t.search};acym_helper.get(ACYM_AJAX_URL,n).then(t=>{i(!1),t.error||(e.innerHTML=t.data.content,c())})}function i(e){const t=document.getElementById("acym__scenario__edit__right__panel__content");t&&(t.innerHTML=e?'<div id="acym__scenario__edit__right__panel__content__loader"><i class="acymicon-circle-o-notch acymicon-spin"></i></div>':"")}function r(){acym_helperScenarioRightPanel.removeCloseRightPanelListener();const e=document.getElementById("acym__scenario__edit__right__panel"),c=document.getElementById("acym__scenario__edit__right__panel__content");e&&c&&(e.style.display="none",c.innerHTML="",function(){for(let e in t)t[e]=null;n={}}())}!function(){const e=document.getElementById("acym__scenario__performances__chart-data"),n=document.getElementById("acym__scenario__performances__chart-nodes");if(!e||!n)return;const c=JSON.parse(e.value),_=JSON.parse(n.value),i={};for(const[e,t]of Object.entries(_))i[e]=t.name;SankeyChart.display({id:"acym__scenario__performances__sankey",data:c,labels:i,nodeClickCallback:function(e,n){_[e]&&function(e){const n=document.getElementById("acym__scenario__edit__right__panel"),c=document.getElementById("acym__scenario__edit__right__panel__title");n&&c&&e.type&&e.scenarioId&&void 0!==e.stepId&&(t.scenarioId=e.scenarioId,t.stepId=e.stepId,t.type=e.type,a(),c.innerText=e.name,n.style.display="flex",setTimeout(()=>{acym_helperScenarioRightPanel.addCloseRightPanelListener(r)},100))}(_[e])},interactive:!0,iterationHidden:3,interactiveOn:"link"})}(),function(){const e=document.getElementById("acym__scenario__edit__right__panel__close");e&&e.addEventListener("click",()=>{r()})}()});