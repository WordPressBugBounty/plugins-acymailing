jQuery(function(_){let i=0;function o(){_('[data-action-number="'+i+'"] .acym__mailbox__edition__action__one__choice').on("change",function(){const i=_(this).parent();i.find(".acym__mailbox__edition__action__one__parameters").hide(),i.find("."+_(this).val()).show()})}_("#mailboxconditionssender").on("change",function(){switch(_(".acym__mailbox__edition__conditions_sender__option").hide(),_(this).val()){case"specific":_("#acym__mailbox__edition__conditions_sender__specific").show();break;case"groups":_("#acym__mailbox__edition__conditions_sender__groups").show();break;case"lists":_("#acym__mailbox__edition__conditions_sender__lists").show()}}).trigger("change"),_("#mailboxconditionssubject").on("change",function(){_(".acym__mailbox__edition__conditions_subject__option").hide();const i=_("#acym__mailbox__edition__conditions_subject__remove");switch(_(this).val()){case"begins":case"contains":case"ends":_("#acym__mailbox__edition__conditions_subject__text").show(),i.show();break;case"regex":_("#acym__mailbox__edition__conditions_subject__regex").show(),i.show()}}).trigger("change"),o(),_(".acym__mailbox__edition__action__one__parameters").hide(),_("#acym__mailbox__edition__action__new").off("click").on("click",function(){const e=_("#acym__mailbox__edition__action__number");e.val(parseInt(e.val())+1),i=e.val(),_(this).before(_("#acym__mailbox__edition__action__template").html().replaceAll("__num__",i)),_('[data-action-number="'+i+'"] .acym__mailbox__edition__action__one__parameters').hide(),_(this).prev().find("select").select2({theme:"foundation",width:"100%"}),o(),_(".acym__mailbox__edition__action__delete").off("click").on("click",function(){_(this).closest(".acym__mailbox__edition__action__one").remove()})}),function(){const o=acym_helper.parseJson(_("#acym__mailbox__edition__actions").val());_.each(o,function(o,e){_("#acym_action0action").val().length>0&&_("#acym__mailbox__edition__action__new").trigger("click"),_.each(e,function(o,e){const a=_("#acym_action"+i+"action");a.val(o),a.trigger("change"),_.each(e,function(e,a){const n=_('[name^="acym_action['+i+"]["+o+"]["+e+']"]');acym_helperFilter.setFieldValue(n,a),n.trigger("change")})})})}(),function(){const i=_("#acym__mailbox__edition__configuration__test-loader"),o=_("#acym__mailbox__edition__configuration__test-result"),e=_("#acym__mailbox__edition__configuration__test-icon");_("#acym__mailbox__edition__configuration__test-test").off("click").on("click",function(){i.css("display","flex"),o.html(""),o.removeAttr("data-acym-tooltip").removeClass("acym__tooltip"),e.removeClass("acymicon-check-circle acym__color__green acymicon-times-circle acym__color__red"),e.hide();const a={ctrl:"bounces",task:"testMailboxAction",mailbox:{id:_('[name="mailbox[id]"]').val(),server:_('[name="mailbox[server]"]').val(),username:_('[name="mailbox[username]"]').val(),password:_('[name="mailbox[password]"]').val(),connection_method:_('[name="mailbox[connection_method]"]').val(),secure_method:_('[name="mailbox[secure_method]"]').val(),self_signed:_('[name="mailbox[self_signed]"]').val(),port:_('[name="mailbox[port]"]').val()}};acym_helper.post(ACYM_AJAX_URL,a).then(_=>{i.hide(),o.html(_.message),_.error?(_.data.report&&_.data.report.length>0&&(o.attr("data-acym-tooltip",a.report.join("<br>")),acym_helperTooltip.setTooltip()),e.addClass("acymicon-times-circle acym__color__red")):e.addClass("acymicon-check-circle acym__color__green"),e.css("display","flex")})})}()});